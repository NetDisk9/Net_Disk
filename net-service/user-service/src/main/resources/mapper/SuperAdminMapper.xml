<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.net.user.mapper.AdminMapper">
    <resultMap type="com.net.user.pojo.vo.UserInfoVO" id="roleMap">
        <result property="userId" column="user_id"/>
        <result property="username" column="username"/>
        <result property="email" column="email"/>
        <result property="loginTime" column="login_time"/>
        <result property="status" column="status"/>
    </resultMap>
    <!--答辩遗址-->
<!--    <select id="listAllUser" resultMap="roleMap">-->
<!--        select * from-->
<!--        (-->
<!--        (select u.id user_id,username,email,status, (select max(login_Time) from user_log b where u.id = b.user_id  ) login_time-->
<!--        from sys_user u-->
<!--        where u.id not in-->
<!--        (select b.user_id from sys_user_role b join sys_role c on b.role_id=c.role_id-->
<!--        where role_name='super')-->
<!--        ) user-->
<!--        )-->
<!--        <where>-->
<!--            <if test="userId!=null">and user_id = #{userId}</if>-->
<!--            <if test="username != null and username!= '' ">and username like concat('%',#{username},'%')</if>-->
<!--            <if test="email != null and email!= '' ">and email = #{email}</if>-->
<!--            <if test="status != null"> status = #{status}</if>-->
<!--            <if test="begTime != null and begTime != '' "> and DATE(login_time) &gt;= DATE(#{begTime}) </if>-->
<!--            <if test="endTime != null and endTime != ''"> and DATE(login_time) &lt;= DATE(#{endTime}) </if>-->
<!--        </where>-->
<!--        limit #{index},#{pageSize}-->
<!--    </select>-->
<!--    <select id="getAllTotal" resultType="Integer">-->
<!--        select count(*) from-->
<!--        (-->
<!--        (select u.id user_id,username,email,status, (select max(login_Time) from user_log b where u.id = b.user_id  ) login_time-->
<!--        from sys_user u-->
<!--        where u.id not in-->
<!--        (select b.user_id from sys_user_role b join sys_role c on b.role_id=c.role_id-->
<!--        where role_name='super' )-->
<!--        ) user-->
<!--        )-->
<!--        <where>-->
<!--            <if test="userId!=null">and user_id = #{userId}</if>-->
<!--            <if test="username != null and username!= '' ">and username like concat('%',#{username},'%')</if>-->
<!--            <if test="email != null and email!= '' ">and email = #{email}</if>-->
<!--            <if test="status != null"> status = #{status}</if>-->
<!--            <if test="begTime != null and begTime != '' "> and DATE(login_time) &gt;= DATE(#{begTime}) </if>-->
<!--            <if test="endTime != null and endTime != ''"> and DATE(login_time) &lt;= DATE(#{endTime}) </if>-->
<!--        </where>-->
<!--    </select>-->


<!--    <select id="listAdmin" resultMap="roleMap">-->
<!--        select * from-->
<!--        (-->
<!--        (select u.id user_id,username,email,status, (select max(login_Time) from user_log b where u.id = b.user_id  ) login_time-->
<!--        from sys_user u-->
<!--        where u.id not in-->
<!--        (select b.user_id from sys_user_role b join sys_role c on b.role_id=c.role_id-->
<!--        where role_name='super' or role_name='administrator')-->
<!--        ) user-->
<!--        )-->
<!--        <where>-->
<!--            <if test="userId!=null">and user_id = #{userId}</if>-->
<!--            <if test="username != null and username!= '' ">and username like concat('%',#{username},'%')</if>-->
<!--            <if test="email != null and email!= '' ">and email = #{email}</if>-->
<!--            <if test="status != null"> status = #{status}</if>-->
<!--            <if test="begTime != null and begTime != '' "> and DATE(login_time) &gt;= DATE(#{begTime}) </if>-->
<!--            <if test="endTime != null and endTime != ''"> and DATE(login_time) &lt;= DATE(#{endTime}) </if>-->
<!--        </where>-->
<!--        limit #{index},#{pageSize}-->
<!--    </select>-->
<!--    <select id="getAdminTotal" resultType="Integer">-->
<!--        select count(*) from-->
<!--        (-->
<!--        (select u.id user_id,username,email,status, (select max(login_Time) from user_log b where u.id = b.user_id  ) login_time-->
<!--        from sys_user u-->
<!--        where u.id not in-->
<!--        (select b.user_id from sys_user_role b join sys_role c on b.role_id=c.role_id-->
<!--        where role_name='super' or role_name='administrator' )-->
<!--        ) user-->
<!--        )-->
<!--        <where>-->
<!--            <if test="userId!=null">and user_id = #{userId}</if>-->
<!--            <if test="username != null and username!= '' ">and username like concat('%',#{username},'%')</if>-->
<!--            <if test="email != null and email!= '' ">and email = #{email}</if>-->
<!--            <if test="status != null"> status = #{status}</if>-->
<!--            <if test="begTime != null and begTime != '' "> and DATE(login_time) &gt;= DATE(#{begTime}) </if>-->
<!--            <if test="endTime != null and endTime != ''"> and DATE(login_time) &lt;= DATE(#{endTime}) </if>-->
<!--        </where>-->
<!--    </select>-->

<!--    <select id="listAdministrator" resultMap="roleMap">-->
<!--        select * from-->
<!--        (-->
<!--        (select u.id user_id,username,email,status, (select max(login_Time) from user_log b where u.id = b.user_id  ) login_time-->
<!--        from sys_user u-->
<!--        where u.id not in-->
<!--            (select b.user_id from sys_user_role b join sys_role c on b.role_id=c.role_id-->
<!--            where role_name='super')-->
<!--        and u.id in-->
<!--            (select b.user_id from sys_user_role b join sys_role c on b.role_id=c.role_id-->
<!--        where role_name='administrator')-->
<!--        ) user-->
<!--        )-->
<!--        <where>-->
<!--            <if test="userId!=null">and user_id = #{userId}</if>-->
<!--            <if test="username != null and username!= '' ">and username like concat('%',#{username},'%')</if>-->
<!--            <if test="email != null and email!= '' ">and email = #{email}</if>-->
<!--            <if test="status != null"> status = #{status}</if>-->
<!--            <if test="begTime != null and begTime != '' "> and DATE(login_time) &gt;= DATE(#{begTime}) </if>-->
<!--            <if test="endTime != null and endTime != ''"> and DATE(login_time) &lt;= DATE(#{endTime}) </if>-->
<!--        </where>-->
<!--        limit #{index},#{pageSize}-->
<!--    </select>-->
<!--    <select id="getTotal" resultType="Integer">-->
<!--        select count(*) from-->
<!--        (-->
<!--        (select u.id user_id,username,email,status, (select max(login_Time) from user_log b where u.id = b.user_id  ) login_time-->
<!--        from sys_user u-->
<!--        where u.id not in-->
<!--        (select b.user_id from sys_user_role b join sys_role c on b.role_id=c.role_id-->
<!--        where role_name='super')-->
<!--        and u.id in-->
<!--        (select b.user_id from sys_user_role b join sys_role c on b.role_id=c.role_id-->
<!--        where role_name='administrator')-->
<!--        ) user-->
<!--        )-->
<!--        <where>-->
<!--            <if test="userId!=null">and user_id = #{userId}</if>-->
<!--            <if test="username != null and username!= '' ">and username like concat('%',#{username},'%')</if>-->
<!--            <if test="email != null and email!= '' ">and email = #{email}</if>-->
<!--            <if test="status != null"> status = #{status}</if>-->
<!--            <if test="begTime != null and begTime != '' "> and DATE(login_time) &gt;= DATE(#{begTime}) </if>-->
<!--            <if test="endTime != null and endTime != ''"> and DATE(login_time) &lt;= DATE(#{endTime}) </if>-->
<!--        </where>-->
<!--    </select>-->
</mapper>
